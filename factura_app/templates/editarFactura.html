{% extends "base_factura.html" %}


  {% block body %}
  <div class="row"><!--La fila -->
    <div class="col-sm-12 col-md-4 col-lg-4 col-xl-4"> <!--Columna izquierda-->
        <h1>Editar</h1>
        <div class="card"><!--La tarjeta-->
          <div class="card-body">
            <form action="/editarFactura/" method="post" > {% csrf_token %} <!--Falta action-->
              <div class="form-group">
                <input type="text" id="txt_idfactura" name="txt_idfactura" value="{{factura.id_factura}}" class="form-control" minlength="1" maxlength="6" required>
              </div>
              <div class="form-group py-3">
                <input type="text" id="txt_idcliente" name="txt_idcliente" value="{{factura.id_cliente}}"  class="form-control"  maxlength="100" required>
              </div>
              <div class="form-group">
                <input type="text" id="num_idproducto" name="num_idproducto" value="{{factura.id_producto}}" minlength="1" maxlength="30" class="form-control"  required>
              </div>
  
              <div class="form-group py-3">
                <input type="text" id="num_metodo" name="num_metodo"value="{{factura.metodo_pago}}"  minlength="0" maxlength="30" class="form-control"  required>
              </div>
  
              <div class="form-group ">
                <input type="text" id="num_total" name="num_total" value="{{factura.total}}" class="form-control"  required>
              </div>
  
              <div class="form-group py-3">
                <input type="text" id="txt_idtrabajador" name="txt_idtrabajador" value="{{factura.id_trabajador}}" minlength="1" maxlength="300" class="form-control"  required>
              </div>
  
              <div class="form-group ">
                <label for="fecha" id="fech">{{factura.fecha}}</label>
                <input type="date" id="fecha" name="fecha" class="form-control"  required>
              </div>
  
  
              <div class="form-group py-3">
                <button type="submit" class="btn btn-primary">Guardar Producto</button>
              </div>
  
  
            </form>
          </div>
        </div> <!--La tarjeta-->
    </div><!--Columna izquierda-->

  </div>

  <script>
    const fecha_texto = document.getElementById("fech").innerHTML
    console.log(fecha_texto)

    function convertirFechaAFormatoDate(fechaTexto) {
      const meses = {
                "enero": "01",
                "febrero": "02",
                "marzo": "03",
                "abril": "04",
                "mayo": "05",
                "junio": "06",
                "julio": "07",
                "agosto": "08",
                "septiembre": "09",
                "octubre": "10",
                "noviembre": "11",
                "diciembre": "12"
            };

      const partes = fechaTexto.toLowerCase().split(" de ");
      const dia = partes[0].padStart(2, "0"); // Asegurar que tenga 2 d√≠gitos
      const mes = meses[partes[1]];
      const anio = partes[2];


      return `${anio}-${mes}-${dia}`;

        }
      const fechaFormateada = convertirFechaAFormatoDate(fecha_texto);
        document.getElementById("fecha").value = fechaFormateada;
  </script>

    {% endblock %}

   

    
